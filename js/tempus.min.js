/*! tempus 0.2.2 Kuznetsov Aleksey <me@akuzn.com> 2013-11-19 */
!function(a,b){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d;for(c=b||0,d=this.length;d>c;c+=1)if(this[c]===a)return c;return-1});var c,d,e="0.2.2",f=function(a,b){for(var c=a.toString();c.length<b;)c="0"+c;return c},g=function(a,c){return c!==b?(a.year(c.year()||c.year),a.month(c.month()||c.month),a.day(c.day()||c.day),a.hours(c.hours()||c.hours),a.minutes(c.minutes()||c.minutes),a.seconds(c.seconds()||c.seconds),a.milliseconds(c.milliseconds()||c.milliseconds),a):b},h=function(a,b){var c,d="";return c=a.slice(b,b+1),""===c||isNaN(Number(c))||(d+="%H"),c=a.charAt(b+2),""!==c&&":"===c&&(d+=c),c=a.slice(b+3,b+4),""===c||isNaN(Number(c))||(d+="%M"),c=a.charAt(b+5),""!==c&&":"===c&&(d+=c),c=a.slice(b+6,b+7),""===c||isNaN(Number(c))||(d+="%S"),d},i=function(a,b){var c,d,e=[a.slice(b,b+1),a.charAt(b+2),a.slice(b+3,b+4),a.charAt(b+5),a.slice(b+6,b+9)];return isNaN(Number(e[0]))||isNaN(Number(e[2]))||isNaN(Number(e[4]))?(d=[a.slice(b,b+3),a.charAt(b+4),a.slice(b+5,b+6),a.charAt(b+7),a.slice(b+8,b+9)],isNaN(Number(d[0]))||isNaN(Number(d[2]))||isNaN(Number(d[4]))?"":("-"===d[1]&&"-"===d[3]&&(c="%Y-%m-%d"),c)):("."===e[1]&&"."===e[3]?c="%d.%m.%Y":"-"===e[1]&&"-"===e[3]?c="%m-%d-%Y":"/"===e[1]&&"/"===e[3]&&(c="%m/%d/%Y"),c)},j=a.tempus,k=a.TempusDate,l=a.navigator,m=(l.language||l.systemLanguage||l.userLanguage||"en").substr(0,2).toLowerCase(),n={en:{monthShortNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthLongNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayShortNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayLongNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ru:{monthShortNames:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],monthLongNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayShortNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dayLongNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]}},o={"%d":{format:function(a){return f(a.day()||c.constants().MIN_DAY,2)},parse:function(a){var c=Number(a);return{day:isNaN(c)?b:c}},minLength:2,maxLength:2,type:"number"},"%m":{format:function(a){return f(a.month()||c.constants().MIN_MONTH,2)},parse:function(a){var c=Number(a);return{month:isNaN(c)?b:c}},minLength:2,maxLength:2,type:"number"},"%Y":{format:function(a){return f(a.year()||c.constants().MIN_YEAR,4)},parse:function(a){var c=Number(a);return{year:isNaN(c)?b:c}},minLength:4,maxLength:4,type:"number"},"%w":{format:function(a){return a.dayOfWeek()||c.constants().MIN_DAY_OF_WEEK},parse:function(){return{}},minLength:1,maxLength:1,type:"number"},"%a":{format:function(a){return n[m].dayShortNames[a.dayOfWeek()||c.constants().MIN_DAY_OF_WEEK]},parse:function(){return{}},minLength:1,maxLength:999,type:"word"},"%A":{format:function(a){return n[m].dayLongNames[a.dayOfWeek()||c.constants().MIN_DAY_OF_WEEK]},parse:function(){return{}},minLength:1,maxLength:999,type:"word"},"%b":{format:function(a){return n[m].monthShortNames[a.month()||c.constants().MIN_MONTH]},parse:function(a){var d=c.monthNames().indexOf(a)+1;return{month:-1!==d?d:b}},minLength:1,maxLength:999,type:"word"},"%B":{format:function(a){return n[m].monthLongNames[a.month()||c.constants().MIN_MONTH]},parse:function(a){var d=c.monthNames(!0).indexOf(a)+1;return{month:-1!==d?d:b}},minLength:1,maxLength:999,type:"word"},"%H":{format:function(a){return f(a.hours()||c.constants().MIN_HOURS,2)},parse:function(a){var c=Number(a);return{hours:isNaN(c)?b:c}},minLength:2,maxLength:2,type:"number"},"%M":{format:function(a){return f(a.minutes()||c.constants().MIN_MINUTES,2)},parse:function(a){var c=Number(a);return{minutes:isNaN(c)?b:c}},minLength:2,maxLength:2,type:"number"},"%S":{format:function(a){return f(a.seconds()||c.constants().MIN_SECONDS,2)},parse:function(a){var c=Number(a);return{seconds:isNaN(c)?b:c}},minLength:2,maxLength:2,type:"number"},"%s":{format:function(a){return a.timestamp()},parse:function(a){return isNaN(Number(a))?{}:c(Number(a)).get()},minLength:1,maxLength:20,type:"number"},"%F":{format:function(a){return f(a.year()||c.constants().MIN_YEAR,4)+"-"+f(a.month()||c.constants().MIN_MONTH,2)+"-"+f(a.day()||c.constants().MIN_DAY,2)},parse:function(a){var b=Number(a.slice(0,4)),c=Number(a.slice(6,7)),d=Number(a.slice(9,10));return{year:b,month:c,day:d}},minLength:10,maxLength:10,type:"string"},"%D":{format:function(a){return f(a.month()||c.constants().MIN_MONTH,2)+"/"+f(a.day()||c.constants().MIN_DAY,2)+"/"+f(a.year()||c.constants().MIN_YEAR,4)},parse:function(a){var b=Number(a.slice(0,2)),c=Number(a.slice(3,5)),d=Number(a.slice(6,10));return{year:d,month:b,day:c}},minLength:10,maxLength:10,type:"string"}},p={useMilliseconds:!1,monthFromZero:!1};d=function(a,c,d){return this.date=new Date,this.incorrect={year:!1,month:!1,day:!1,hours:!1,minutes:!1,seconds:!1,milliseconds:!1},a!==b&&this.set(a,c,d),this},d.fn=d.prototype,d.fn.dayCount=function(){var a=this.month(),b=c.constants().MAX_DAY_IN_MONTHS[a-(c.options("monthFromZero")?0:1)];return this.leapYear()&&2===a&&(b+=1),b},d.fn.year=function(a){return 0===arguments.length?this.incorrect.year===!1?this.date.getFullYear():this.incorrect.year:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setFullYear(c.constants().MIN_YEAR),this.incorrect.year=!1):Number(a)>=c.constants().MIN_YEAR&&Number(a)<=c.constants().MAX_YEAR?(this.date.setFullYear(Number(a)),this.incorrect.year=!1):this.incorrect.year=Number(a),this)},d.fn.month=function(a){return 0===arguments.length?this.incorrect.month===!1?c.options("monthFromZero")?this.date.getMonth():this.date.getMonth()+1:this.incorrect.month:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setMonth(c.options("monthFromZero")?c.constants().MIN_MONTH:c.constants().MIN_MONTH-1),this.incorrect.month=!1):Number(a)>=c.constants().MIN_MONTH&&Number(a)<=c.constants().MAX_MONTH?(this.date.setMonth(c.options("monthFromZero")?Number(a):Number(a)-1),this.incorrect.month=!1):this.incorrect.month=Number(a),this)},d.fn.day=function(a){return 0===arguments.length?this.incorrect.day===!1?this.date.getDate():this.incorrect.day:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setDate(c.constants().MIN_DAY),this.incorrect.day=!1):Number(a)>=c.constants().MIN_DAY&&Number(a)<=this.dayCount()?(this.date.setDate(Number(a)),this.incorrect.day=!1):this.incorrect.day=Number(a),this)},d.fn.hours=function(a){return 0===arguments.length?this.incorrect.hours===!1?this.date.getHours():this.incorrect.hours:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setHours(c.constants().MIN_HOURS),this.incorrect.hours=!1):Number(a)>=c.constants().MIN_HOURS&&Number(a)<=c.constants().MAX_HOURS?(this.date.setHours(Number(a)),this.incorrect.hours=!1):this.incorrect.hours=Number(a),this)},d.fn.minutes=function(a){return 0===arguments.length?this.incorrect.minutes===!1?this.date.getMinutes():this.incorrect.minutes:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setMinutes(c.constants().MIN_MINUTES),this.incorrect.minutes=!1):Number(a)>=c.constants().MIN_MINUTES&&Number(a)<=c.constants().MAX_MINUTES?(this.date.setMinutes(Number(a)),this.incorrect.minutes=!1):this.incorrect.minutes=Number(a),this)},d.fn.seconds=function(a){return 0===arguments.length?this.incorrect.seconds===!1?this.date.getSeconds():this.incorrect.seconds:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setSeconds(c.constants().MIN_SECONDS),this.incorrect.seconds=!1):Number(a)>=c.constants().MIN_SECONDS&&Number(a)<=c.constants().MAX_SECONDS?(this.date.setSeconds(Number(a)),this.incorrect.seconds=!1):this.incorrect.seconds=Number(a),this)},d.fn.milliseconds=function(a){return 0===arguments.length?this.incorrect.milliseconds===!1?this.date.getMilliseconds():this.incorrect.milliseconds:("number"!=typeof a&&"string"!=typeof a||isNaN(Number(a))?(this.date.setMilliseconds(c.constants().MIN_MILLISECONDS),this.incorrect.milliseconds=!1):Number(a)>=c.constants().MIN_MILLISECONDS&&Number(a)<=c.constants().MAX_MILLISECONDS?(this.date.setMilliseconds(Number(a)),this.incorrect.milliseconds=!1):this.incorrect.milliseconds=Number(a),this)},d.fn.week=function(){var a=new Date(this.year(),0,1),b=this.get("Date");return Math.ceil(((b-a)/864e5+a.getDay()+1)/7)},d.fn.set=function(a,d,e){if(this.incorrect={year:!1,month:!1,day:!1,hours:!1,minutes:!1,seconds:!1,milliseconds:!1},a===b)return this.date=new Date,this;if(a instanceof Date)return this.date=a,this;if("number"==typeof a)return this.date=new Date(a*(c.options("useMilliseconds")?1:1e3)),this;if("object"==typeof a&&(a instanceof Array?(this.year(a[0]),this.month(a[1]),this.day(a[2]),this.hours(a[3]),this.minutes(a[4]),this.seconds(a[5]),this.milliseconds(a[6])):(this.year(a.year),this.month(a.month),this.day(a.day),this.hours(a.hours),this.minutes(a.minutes),this.seconds(a.seconds),this.milliseconds(a.milliseconds))),"string"==typeof a){var f,h,i,j,k,l,m=[],n=[],p=0,q=0,r={};if(a===b)return h=g(this,e),h===b&&(this.incorrect={year:-1,month:-1,day:-1,hours:-1,minutes:-1,seconds:-1,milliseconds:-1}),h;for(d===b&&(d=c.detectFormat(a));p<d.length;){if("%"===d.charAt(p)){if(i=d.charAt(p)+d.charAt(p+1),o[i]!==b){switch(j=0,k="",o[i].type){case"number":for(;j<o[i].maxLength&&q+j<a.length&&!isNaN(Number(a.charAt(q+j)));)k+=a.charAt(q+j),j+=1;break;case"word":for(;j<o[i].maxLength&&q+j<a.length&&/^\w+$/.test(a.charAt(q+j));)k+=a.charAt(q+j),j+=1;break;case"string":for(;j<o[i].maxLength&&q+j<a.length;)k+=a.charAt(q+j),j+=1}if(j<o[i].minLength)return h=g(this,e),h===b&&(this.incorrect={year:-1,month:-1,day:-1,hours:-1,minutes:-1,seconds:-1,milliseconds:-1}),h;m.push(i),n.push(k),j-=1,q+=j,p+=1}}else if(a.charAt(q)!==d.charAt(p))return h=g(this,e),h===b&&(this.incorrect={year:-1,month:-1,day:-1,hours:-1,minutes:-1,seconds:-1,milliseconds:-1}),h;p+=1,q+=1}for(f in m)m.hasOwnProperty(f)&&o.hasOwnProperty(m[f])&&(l=o[m[f]].parse(n[f]),r={year:l.year!==b?l.year:r.year,month:l.month!==b?l.month:r.month,day:l.day!==b?l.day:r.day,hours:l.hours!==b?l.hours:r.hours,minutes:l.minutes!==b?l.minutes:r.minutes,seconds:l.seconds!==b?l.seconds:r.seconds});this.year(r.year),this.month(r.month),this.day(r.day),this.hours(r.hours),this.minutes(r.minutes),this.seconds(r.seconds),this.milliseconds(r.milliseconds)}return this},d.fn.leapYear=function(){var a=this.year();return a%4===0?a%100===0?a%400===0:!0:!1},d.fn.timestamp=function(a){return 0!==arguments.length?(this.date=new Date(Number(a)*(c.options("useMilliseconds")?1:1e3)+6e4*this.date.getTimezoneOffset()),this):c.options("useMilliseconds")?this.date.getTime()-6e4*this.date.getTimezoneOffset():Math.floor(this.date.getTime()/1e3)-60*this.date.getTimezoneOffset()},d.fn.utc=function(a){return 0!==arguments.length?(this.date=new Date(Number(a)*(c.options("useMilliseconds")?1:1e3)),this):c.options("useMilliseconds")?this.date.getTime():Math.floor(this.date.getTime()/1e3)},d.fn.dayOfWeek=function(a){switch(a){case"long":return n[m].dayLongNames[this.date.getDay()];case"short":return n[m].dayShortNames[this.date.getDay()];default:return this.date.getDay()}},d.fn.timezone=function(a){switch(a){case"hours":return Math.floor(this.date.getTimezoneOffset()/60);case"minutes":return this.date.getTimezoneOffset();default:return 60*this.date.getTimezoneOffset()}},d.fn.get=function(a){switch(a){case"Date":return new Date(this.year(),this.month(),this.day(),this.hours(),this.minutes(),this.seconds(),this.milliseconds());case"DateUTC":return new Date(Date.UTC(this.year(),this.month(),this.day(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()));default:return{year:this.year(),month:this.month(),week:this.week(),day:this.day(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds(),utc:this.utc(),dayOfWeek:this.dayOfWeek(),dayOfWeekShort:this.dayOfWeek("short"),dayOfWeekLong:this.dayOfWeek("long"),timestamp:this.timestamp()}}},d.fn.format=function(a){for(var c,d=0,e="";d<a.length;)"%"===a.charAt(d)?(c=a.charAt(d)+a.charAt(d+1),o[c]!==b?(e+=o[c].format(this),d+=1):e+="%"):e+=a.charAt(d),d+=1;return e},d.fn.validate=function(){return this.incorrect.year===!1&&this.incorrect.month===!1&&this.incorrect.day===!1&&this.incorrect.hours===!1&&this.incorrect.minutes===!1&&this.incorrect.seconds===!1&&this.incorrect.milliseconds===!1},d.fn.errors=function(){return this.incorrect},d.fn.between=function(a,c){var d=this.timestamp(),e=a.timestamp();switch(c){case"year":return Math.floor((e-d)/31556952);case"month":return Math.floor((e-d)/2629746);case"day":return Math.floor((e-d)/86400);case"hours":return Math.floor((e-d)/3600);case"minutes":return Math.floor((e-d)/60);case"seconds":return e-d;default:return b}},d.fn.calc=function(a){return a.year!==b&&this.date.setFullYear(this.date.getFullYear()+a.year),a.month!==b&&this.date.setMonth(this.date.getMonth()+a.month),a.day!==b&&this.date.setDate(this.date.getDate()+a.day),a.hours!==b&&this.date.setHours(this.date.getHours()+a.hours),a.minutes!==b&&this.date.setMinutes(this.date.getMinutes()+a.minutes),a.seconds!==b&&this.date.setSeconds(this.date.getSeconds()+a.seconds),a.milliseconds!==b&&this.date.setMilliseconds(this.date.getMilliseconds()+a.milliseconds),this},c=function(a,b,c){return new d(a,b,c)},c.constants=function(){return{MIN_YEAR:1e3,MAX_YEAR:3e3,MIN_MONTH:c.options("monthFromZero")?0:1,MAX_MONTH:c.options("monthFromZero")?11:12,MIN_DAY:1,MAX_DAY_IN_MONTHS:[31,28,31,30,31,30,31,31,30,31,30,31],MIN_DAY_OF_WEEK:0,MAX_DAY_OF_WEEK:6,MIN_HOURS:0,MAX_HOURS:23,MIN_MINUTES:0,MAX_MINUTES:59,MIN_SECONDS:0,MAX_SECONDS:59,MIN_MILLISECONDS:0,MAX_MILLISECONDS:999}},c.version=function(){return e},c.options=function(a,c){if(a===b)return p;if(p.hasOwnProperty(a)){if(c===b)return p[a];p[a]=c}return b},c.noConflict=function(){return a.tempus=j,a.TempusDate=k,{tempus:c,TempusDate:d}},c.generate=function(a){var e,f,g,h,i=a.dateFrom,j=a.dateTo;for("number"!=typeof a.dateFrom&&(i=a.dateFrom instanceof d?i.utc():c(i,a.formatFrom).utc()),"number"!=typeof a.dateTo&&(j=a.dateTo instanceof d?j.utc():c(j,a.formatTo!==b?a.formatTo:a.formatFrom).utc()),"number"==typeof a.period?e={year:0,month:0,day:0,hours:0,minutes:0,seconds:a.period}:"string"==typeof a.period?e={year:"year"===a.period?1:0,month:"month"===a.period?1:0,day:"day"===a.period?1:0,hours:"hours"===a.period?1:0,minutes:"minutes"===a.period?1:0,seconds:"seconds"===a.period?1:0}:"object"==typeof a.period&&(e={year:a.period.year!==b?a.period.year:0,month:a.period.month!==b?a.period.month:0,day:a.period.day!==b?a.period.day:0,hours:a.period.hours!==b?a.period.hours:0,minutes:a.period.minutes!==b?a.period.minutes:0,seconds:a.period.seconds!==b?a.period.seconds:0}),a.groupBy===b?f=a.asObject===!0?{}:[]:(f=[],f.push([]),g=c(i).get()[a.groupBy]),h=function(d,e){return a.asObject===!0?a.format!==b?d[c(e).format(a.format)]={}:d[c(e).format("%F %H:%M:%S")]={}:a.format!==b?d.push(c(e).format(a.format)):d.push(c(e)),d},i;j>=i;i=c(i).calc(e).utc())a.groupBy===b?h(f,i):c(i).get()[a.groupBy]===g?h(f[f.length-1],i):(f.push([]),h(f[f.length-1],i),g=c(i).get()[a.groupBy]);return f},c.monthNames=function(a){switch(a){case"long":return n[m].monthLongNames;default:return n[m].monthShortNames}},c.dayNames=function(a){switch(a){case"long":return n[m].dayLongNames;default:return n[m].dayShortNames}},c.lang=function(a){return a===b?m:(m=a,b)},c.availableLangs=function(){return Object.keys(n)},c.registerFormat=function(a,b,c,d,e,f){o[a]={format:b,parse:c,minLength:d,maxLength:e,type:f}},c.unregisterFormat=function(a){delete o[a]},c.detectFormat=function(a){var b,c,d;return b=i(a,0),""!==b&&(d=10),c=a.charAt(d),("T"===c||" "===c)&&(b+=c,d+=1),b+=h(a,d)},a.TempusDate=d,a.tempus=c}(window);