/*! tempus 0.1.31 Kuznetsov Aleksey <me@akuzn.com> 2013-11-13 */
!function(){window.TempusDate=function(a){var b;void 0===a?b=new Date(1e3*(new Date).getTime()):"number"==typeof a?b=new Date(1e3*a):"object"==typeof a&&(b=new Date(void 0!==a.year?a.year:1970,void 0!==a.month?a.month-1:0,void 0!==a.day?a.day:1,void 0!==a.hours?a.hours:0,void 0!==a.minutes?a.minutes:0,void 0!==a.seconds?a.seconds:0));var c=(new Date).toString(),d=c.indexOf("(")>-1?c.match(/\([^\)]+\)/)[0].match(/[A-Z]/g).join(""):c.match(/[A-Z]{3,4}/)[0];"GMT"==d&&/(GMT\W*\d{4})/.test(c)&&(d=RegExp.$1);var e,f;"MSK"===d?(e=-14400,f=-300===b.getTimezoneOffset()?3600:0):(e=Math.floor(60*b.getTimezoneOffset()),f=0),void 0===a&&(b=new Date((new Date).getTime()-1e3*(e+f))),this.getDateOriginal=function(){return{year:void 0!==a.year?a.year:1970,month:void 0!==a.month?a.month:1,day:void 0!==a.day?a.day:1,hours:void 0!==a.hours?a.hours:0,minutes:void 0!==a.minutes?a.minutes:0,seconds:void 0!==a.seconds?a.seconds:0}},this.getDate=function(){return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hours:b.getHours(),minutes:b.getMinutes(),seconds:b.getSeconds(),timestamp:Math.floor(b.getTime()/1e3)+f,timezoneOffset:e,dayOfWeek:b.getDay()}},this.getDateUTC=function(){return{year:b.getUTCFullYear(),month:b.getUTCMonth()+1,day:b.getUTCDate(),hours:b.getUTCHours(),minutes:b.getUTCMinutes(),seconds:b.getUTCSeconds(),timestamp:Number(Math.floor(b.getTime()/1e3)+e+f),timezoneOffset:e,dayOfWeek:b.getUTCDay()}}};var a=function(){var a=this,b="0.1.31",c="en_US",d=!1,e=[31,28,31,30,31,30,31,31,30,31,30,31],f=(new TempusDate).getDate().timezoneOffset,g={en_US:{monthShortNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthLongNames:["January","February","March","April","May","June","July","August","September","October","November","December"],daysShortNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysLongNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ru_RU:{monthShortNames:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],monthLongNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],daysShortNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],daysLongNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]}},h={"%d":{format:function(a){return j(a.day,2)},parse:function(a){var b=Number(a);return{day:isNaN(b)?void 0:b}},parseLit:"\\d{2}"},"%m":{format:function(a){return j(a.month,2)},parse:function(a){var b=Number(a);return{month:isNaN(b)?void 0:b}},parseLit:"\\d{2}"},"%Y":{format:function(a){return j(a.year,4)},parse:function(a){var b=Number(a);return{year:isNaN(b)?void 0:b}},parseLit:"\\d{4}"},"%w":{format:function(b){return a.getDayOfWeek(b)},parse:function(){return{}},parseLit:"\\d{1}"},"%a":{format:function(b){return g[c].daysShortNames[a.getDayOfWeek(b)]},parse:function(){return{}},parseLit:"\\w+"},"%A":{format:function(b){return g[c].daysLongNames[a.getDayOfWeek(b)]},parse:function(){return{}},parseLit:"\\w+"},"%b":{format:function(a){return g[c].monthShortNames[a.month-1]},parse:function(b){var c=a.getMonthNames().indexOf(b)+1;return{month:-1!==c?c:void 0}},parseLit:"\\w+"},"%B":{format:function(a){return g[c].monthLongNames[a.month-1]},parse:function(b){var c=a.getMonthNames(!0).indexOf(b)+1;return{month:-1!==c?c:void 0}},parseLit:"\\w+"},"%H":{format:function(a){return j(a.hours,2)},parse:function(a){var b=Number(a);return{hours:isNaN(b)?void 0:b}},parseLit:"\\d{2}"},"%M":{format:function(a){return j(a.minutes,2)},parse:function(a){var b=Number(a);return{minutes:isNaN(b)?void 0:b}},parseLit:"\\d{2}"},"%S":{format:function(a){return j(a.seconds,2)},parse:function(a){var b=Number(a);return{seconds:isNaN(b)?void 0:b}},parseLit:"\\d{2}"},"%s":{format:function(b){return a.time(b)},parse:function(b){var c=Number(b),d=new TempusDate(Number(c)),e=a.date(c);return isNaN(c)?{}:a.incDate(e,d.getTimezoneOffset(),"minutes")},parseLit:"\\d{1,10}"},"%F":{format:function(a){return j(a.year,4)+"-"+j(a.month,2)+"-"+j(a.day,2)},parse:function(a){var b=Number(a.slice(0,4)),c=Number(a.slice(6,7)),d=Number(a.slice(9,10));return{year:b,month:c,day:d}},parseLit:"\\d{4}-\\d{2}-\\d{2}"},"%D":{format:function(a){return j(a.month,2)+"/"+j(a.day,2)+"/"+j(a.year,4)},parse:function(a){var b=Number(a.slice(0,2)),c=Number(a.slice(3,5)),d=Number(a.slice(6,10));return{year:d,month:b,day:c}},parseLit:"\\d{2}/\\d{2}/\\d{4}"}};this.time=function(a,b){return void 0!==a?("string"==typeof a&&(a=this.parse(a,b)),new TempusDate(a).getDate().timestamp):(new TempusDate).getDateUTC().timestamp},this.date=function(b,c){var d;return"number"==typeof b||"object"==typeof b?(d=new TempusDate(b).getDate(),c&&c.week===!0&&(d.week=a.getWeekNumber(d))):d=void 0,d},this.now=function(a){var b=(new TempusDate).getDate();return void 0===a?b:this.format(b,a)},this.isLeapYear=function(a){return a=void 0!==a?Number(a):this.now().year,a%4==0?a%100==0?a%400==0:!0:!1},this.getDaysCountInMonth=function(a,b){var d=void 0===b?!1:this.isLeapYear(b);if("number"==typeof a)return 2===a?e[a-1]+(d?1:0):e[a-1];if("string"==typeof a){var f=g[c].monthShortNames.indexOf(a);return-1===f&&(f=g[c].monthLongNames.indexOf(a)),-1===f?void 0:(a=f,2===a?e[a]+(d?1:0):e[a])}return void 0},this.getMonthNames=function(a){return a===!0?g[c].monthLongNames:g[c].monthShortNames},this.getDayNames=function(a){return a===!0?g[c].daysLongNames:g[c].daysShortNames},this.getDayOfWeek=function(b){b=a.date(b);var c=b.year,d=b.month,e=b.day,f=[0,3,2,5,0,3,5,1,4,6,2,4];return c-=3>d,Math.floor((c+c/4-c/100+c/400+f[d-1]+e)%7)};var i=function(b,c,d,e){if("object"!=typeof b)return void 0;var f=k(b);return"object"==typeof c?(f=a.date(f),a.normalizeDate({year:f.year+e*(void 0!==c.year?c.year:0),month:f.month+e*(void 0!==c.month?c.month:0),day:f.day+e*(void 0!==c.day?c.day:0),hours:f.hours+e*(void 0!==c.hours?c.hours:0),minutes:f.minutes+e*(void 0!==c.minutes?c.minutes:0),seconds:f.seconds+e*(void 0!==c.seconds?c.seconds:0)})):"number"==typeof c?("seconds"===d&&(f.seconds+=e*Number(c)),"minutes"===d&&(f.minutes+=e*Number(c)),"hours"===d&&(f.hours+=e*Number(c)),"day"===d&&(f.day+=e*Number(c)),"month"===d&&(f.month+=e*Number(c)),"year"===d&&(f.year+=e*Number(c)),a.normalizeDate(f)):void 0};this.incDate=function(a,b,c){return i(a,b,c,1)},this.normalizeDate=function(a){return k(this.date(this.time(a)))},this.decDate=function(a,b,c){return i(a,b,c,-1)},this.between=function(a,b,c){var d=this.time(a),e=this.time(b);switch(c){case"year":return Math.floor((e-d)/31556952);case"month":return Math.floor((e-d)/2629746);case"day":return Math.floor((e-d)/86400);case"hours":return Math.floor((e-d)/3600);case"minutes":return Math.floor((e-d)/60);case"seconds":return e-d;default:return void 0}},this.format=function(a,b){var c,d=b;if("number"!=typeof a&&"object"!=typeof a)return void 0;c=this.date(a);for(var e in h)h.hasOwnProperty(e)&&(d=d.replace(e,h[e].format(c)));return d},this.detectFormat=function(b){for(var c=["^%d\\.%m\\.%Y$","^%Y-%m-%d$","^%m/%d/%Y$","^%Y-%m-%dT%H:%M:%S$","^%d\\.%m\\.%Y %H:%M:%S$","^%d\\.%m\\.%Y %H:%M$","^%d\\.%m\\.%Y %H$","^%Y-%m-%d %H:%M:%S$","^%Y-%m-%d %H:%M$","^%Y-%m-%d %H$","^%m/%d/%Y %H:%M:%S$","^%m/%d/%Y %H:%M$","^%m/%d/%Y %H$","^%Y$","^%H:%M:%S$","^%H:%M$"],d=0;d<c.length;d++)if(void 0!==a.parse(b,c[d]))return c[d].slice(1,-1);return void 0},this.parse=function(b,c,d){var e,f=[];void 0===c&&(c=a.detectFormat(b)),c="^"+c+"$";var g=c;for(e in h)h.hasOwnProperty(e)&&(f.push(e),g=g.replace(new RegExp("("+e+")","g"),"("+h[e].parseLit+")"));var i=new RegExp("("+f.join("|")+")","g"),j=c.match(i),k=new RegExp(g,"g"),l=k.exec(b),m=[];try{for(var n=1;n<l.length;n++)"string"==typeof l[n]&&m.push(l[n])}catch(o){return void 0}var p,q={};for(e in j)j.hasOwnProperty(e)&&h.hasOwnProperty(j[e])&&!isNaN(Number(e))&&(p=h[j[e]].parse(m[e]),q={year:void 0!=p.year?p.year:q.year,month:void 0!=p.month?p.month:q.month,day:void 0!=p.day?p.day:q.day,hours:void 0!=p.hours?p.hours:q.hours,minutes:void 0!=p.minutes?p.minutes:q.minutes,seconds:void 0!=p.seconds?p.seconds:q.seconds});return d===!0?new TempusDate(q).getDateOriginal():a.date(q)},this.setTimeout=function(a,b){return setTimeout(a,1e3*Number(b))},this.setInterval=function(a,b){return setInterval(a,1e3*Number(b))},this.clock=function(b){return b(a.now()),this.setInterval(function(){b(a.now())},1)},this.alarm=function(b,c){var d=this.setInterval(function(){0===a.between(a.now(),b,"seconds")&&(c(b),clearInterval(d))},1);return d},this.validate=function(a,b){"string"==typeof a&&(a=this.parse(a,b,!0));var c=this.normalizeDate(a);return a.year===c.year&&a.month===c.month&&a.day===c.day&&a.hours===c.hours&&a.minutes===c.minutes&&a.seconds===c.seconds},this.reformat=function(a,b,c){return this.format(this.parse(a,b),c)},this.setLocale=function(a){c=a||"en_US"},this.getLocale=function(){return c},this.setWeekStartsFromMonday=function(a){return d=a?!0:!1},this.getWeekStartsFromMonday=function(){return d},this.getAvailableLocales=function(){return Object.keys(g)},this.getVersion=function(){return b},this.generateDates=function(b){var c,d,e=b.dateFrom,f=b.dateTo;if("string"==typeof b.dateFrom&&(e=a.parse(b.dateFrom,b.formatFrom)),e=a.time(e),"string"==typeof b.dateTo&&(f=a.parse(b.dateTo,void 0!==b.formatTo?b.formatTo:b.formatFrom)),f=a.time(f),"number"==typeof b.period?c={year:0,month:0,day:0,hours:0,minutes:0,seconds:b.period}:"string"==typeof b.period?c={year:"year"===b.period?1:0,month:"month"===b.period?1:0,day:"day"===b.period?1:0,hours:"hours"===b.period?1:0,minutes:"minutes"===b.period?1:0,seconds:"seconds"===b.period?1:0}:"object"==typeof b.period&&(c={year:void 0!==b.period.year?b.period.year:0,month:void 0!==b.period.month?b.period.month:0,day:void 0!==b.period.day?b.period.day:0,hours:void 0!==b.period.hours?b.period.hours:0,minutes:void 0!==b.period.minutes?b.period.minutes:0,seconds:void 0!==b.period.seconds?b.period.seconds:0}),void 0===b.groupBy)d=b.asObject===!0?{}:[];else{d=[],d.push([]);var g=a.date(e,{week:!0})[b.groupBy]}for(var h=function(c,d){return b.asObject===!0?void 0!==b.format?c[a.format(d,b.format)]={}:c[a.format(d,"%F %H:%M:%S")]={}:void 0!==b.format?c.push(a.format(d,b.format)):c.push(d),c};f>=e;e=this.time(a.incDate(a.date(e),c)))void 0===b.groupBy?h(d,e):a.date(e,{week:!0})[b.groupBy]===g?h(d[d.length-1],e):(d.push([]),h(d[d.length-1],e),g=a.date(e,{week:!0})[b.groupBy]);return d},this.registerFormat=function(a,b,c,d){h[a]={format:b,parse:c,parseLit:d}},this.unregisterFormat=function(a){delete h[a]},this.getWeekNumber=function(b,c){var d;"string"==typeof b?(d=a.time(b,c),b=a.date(d),d*=1e3):d=1e3*a.time(b);var e=new TempusDate({year:b.year,month:1,day:1}).getDate().dayOfWeek;return Math.ceil(((d-e)/864e5+e+1)/7)},this.getTimezoneOffset=function(a){switch(a){case"hours":return Math.floor(f/3600);case"minutes":return f/60;default:return f}};var j=function(a,b){for(var c=a.toString();c.length<b;)c="0"+c;return c},k=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1})};window.tempus=new a}();